(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7715],{86483:function(e,t,n){"use strict";let i,s;n.r(t),n.d(t,{Playground:function(){return tk},default:function(){return t_}});var l,a,r,o,c,d=n(85893),u=n(67294),m=n(11163),h=n(98281),p=n(44610),g=n(73445),x=n(11754),f=n(13396),v=n(27662),y=n(72267),b=n(17137),S=n(60019),w=n(5531),j=n(94248),C=n(69334),k=n(58525);(0,k.ZC)({title:{fontSize:k.TS.xLarge},section:{marginBottom:"25px"}});let _=(0,k.ZC)({title:{fontWeight:k.lq.bold},container:{marginTop:"10px"},block:{marginTop:"15px"},description:{marginTop:"5px"}});function N(e){return e.description?(0,d.jsxs)("div",{className:_.block,children:[(0,d.jsx)("div",{className:_.title,children:e.title}),(0,d.jsx)("div",{className:_.description,children:e.description}),(0,d.jsx)("div",{className:_.container,children:e.control})]}):(0,d.jsxs)("div",{className:_.block,children:[(0,d.jsx)("div",{className:_.title,children:e.title}),(0,d.jsx)("div",{className:_.container,children:e.control})]})}var E=n(82553),H=n(67939),T=n(23352),I=n(38511);let F=[{key:E.vm.FlowMainnet,text:"Flow Mainnet"},{key:E.vm.FlowTestnet,text:"Flow Testnet"},{key:E.vm.FlowPreviewnet,text:"Flow Previewnet"},{key:E.vm.FlowEmulator,text:"Local Emulator",disabled:!1}],P=[{key:"blink",text:"Blink (default)"},{key:"smooth",text:"Smooth"},{key:"phase",text:"Phase"},{key:"expand",text:"Expand"},{key:"solid",text:"Solid"}],D=[{key:"line",text:"Line (default)"},{key:"block",text:"Block"},{key:"underline",text:"Underline"},{key:"line-thin",text:"Line thin"},{key:"block-outline",text:"Block outline"},{key:"underline-thin",text:"Underline thin"}],V=[{key:H.Uo,text:"System default"},...(0,H.jS)().map(e=>({key:e.family,text:e.label}))];var U=e=>{var t;let{isOpen:n,onClose:i}=e,s="Settings",l="SettingsSubText",[a,r]=(0,u.useState)({}),o=(0,g.F)(),c=(0,T.D$)(I.HS,"settings"),m=(0,T.D$)(I.HS,"monaco"),h=()=>{i((0,p._)({},a)),r({})},k=(0,C.QD)(o),_=(0,C.EM)(o);return(0,d.jsxs)(x.u,{titleAriaId:s,subtitleAriaId:l,isOpen:!!n,onDismiss:()=>h(),containerClassName:k.container,children:[(0,d.jsxs)("div",{className:k.header,children:[(0,d.jsx)("span",{id:s,children:"Settings"}),(0,d.jsx)(f.h,{iconProps:{iconName:"Cancel"},styles:_,ariaLabel:"Close popup modal",onClick:()=>h()})]}),(0,d.jsx)("div",{id:l,className:k.body,children:(0,d.jsxs)(b.o,{"aria-label":"Settings",children:[(0,d.jsxs)(S.M,{headerText:"Editor",children:[(0,d.jsx)(N,{title:"Font Family",description:"Controls editor font family",control:(0,d.jsx)(v.L,{options:V,defaultSelectedKey:null!==(t=null==m?void 0:m.fontFamily)&&void 0!==t?t:H.Uo,onChange:(e,t)=>{t&&(m.fontFamily=t.key.toString(),(0,T.Vx)(I.HS,"monaco"))}})},"fontFamily"),(0,d.jsx)(N,{title:"Use System Theme",control:(0,d.jsx)(y.X,{label:"Follow system dark mode preference instead of manual toggle.",defaultChecked:null==c?void 0:c.useSystemTheme,onChange:(e,t)=>{c.useSystemTheme=!!t,(0,T.Vx)(I.HS,"settings")}})},"autoDetectTheme"),(0,d.jsx)(N,{title:"Font Ligatures",control:(0,d.jsx)(y.X,{label:"Enable programming font ligatures in supported fonts",defaultChecked:null==m?void 0:m.fontLigatures,onChange:(e,t)=>{t&&(m.fontLigatures=t,(0,T.Vx)(I.HS,"monaco"))}})},"fontLigatures")]}),(0,d.jsxs)(S.M,{headerText:"Flow Network",style:{paddingBottom:"64px"},children:[(0,d.jsx)(N,{title:"Network",description:"This option lets you choose which network your scripts and transactions should be executed.",control:(0,d.jsx)(v.L,{options:F,defaultSelectedKey:null==c?void 0:c.runtime,onChange:(e,t)=>{t&&(c.runtime=t.key,(0,T.Vx)(I.HS,"settings"))}})},"runtime"),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[c.runtime===E.vm.FlowMainnet&&(0,d.jsxs)(w.c,{isMultiline:!0,messageBarType:j.f.warning,children:[(0,d.jsx)("b",{children:"Mainnet"})," transactions can be dangerous, please be careful when running transactions shared by others. Use it at your own risk."]}),c.runtime===E.vm.FlowEmulator&&(0,d.jsxs)(w.c,{isMultiline:!0,messageBarType:j.f.warning,children:[(0,d.jsx)("b",{children:"Emulator"})," settings has to be like below:",(0,d.jsx)("p",{children:(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"You must be running local emulator (on :8888)"}),(0,d.jsx)("li",{children:"Dev wallet (on :8701/fcl/authn)"})]})})]})]}),(0,d.jsx)(N,{title:"Auto Format",control:(0,d.jsx)(y.X,{label:"Auto format code before build",defaultChecked:null==c?void 0:c.autoFormat,onChange:(e,t)=>{c.autoFormat=null!=t&&t,(0,T.Vx)(I.HS,"settings")}})},"autoFormat")]}),(0,d.jsxs)(S.M,{headerText:"Advanced",children:[(0,d.jsx)(N,{title:"Cursor Blinking",description:"Set cursor animation style",control:(0,d.jsx)(v.L,{options:P,defaultSelectedKey:null==m?void 0:m.cursorBlinking,onChange:(e,t)=>{t&&(m.cursorBlinking=t.key,(0,T.Vx)(I.HS,"monaco"))}})},"cursorBlinking"),(0,d.jsx)(N,{title:"Cursor Style",description:"Set the cursor style",control:(0,d.jsx)(v.L,{options:D,defaultSelectedKey:null==m?void 0:m.cursorStyle,onChange:(e,t)=>{t&&(m.cursorStyle=t.key,(0,T.Vx)(I.HS,"monaco"))}})},"cursorStyle"),(0,d.jsx)(N,{title:"Select On Line Numbers",control:(0,d.jsx)(y.X,{label:"Select corresponding line on line number click",defaultChecked:null==m?void 0:m.selectOnLineNumbers,onChange:(e,t)=>{m.selectOnLineNumbers=null!=t&&t,(0,T.Vx)(I.HS,"monaco")}})},"selectOnLineNumbers"),(0,d.jsx)(N,{title:"Mini Map",control:(0,d.jsx)(y.X,{label:"Enable mini map on side",defaultChecked:null==m?void 0:m.minimap,onChange:(e,t)=>{m.minimap=null!=t&&t,(0,T.Vx)(I.HS,"monaco")}})},"minimap"),(0,d.jsx)(N,{title:"Context Menu",control:(0,d.jsx)(y.X,{label:"Enable editor context menu (on right click)",defaultChecked:null==m?void 0:m.contextMenu,onChange:(e,t)=>{m.contextMenu=null!=t&&t,(0,T.Vx)(I.HS,"monaco")}})},"contextMenu"),(0,d.jsx)(N,{title:"Smooth Scrolling",control:(0,d.jsx)(y.X,{label:"Enable that the editor animates scrolling to a position",defaultChecked:null==m?void 0:m.smoothScrolling,onChange:(e,t)=>{m.smoothScrolling=null!=t&&t,(0,T.Vx)(I.HS,"monaco")}})},"smoothScroll"),(0,d.jsx)(N,{title:"Mouse Wheel Zoom",control:(0,d.jsx)(y.X,{label:"Zoom the font in the editor when using the mouse wheel in combination with holding Ctrl",defaultChecked:null==m?void 0:m.mouseWheelZoom,onChange:(e,t)=>{m.mouseWheelZoom=null!=t&&t,(0,T.Vx)(I.HS,"monaco")}})},"mouseWheelZoom")]})]})})]})},A=n(78612);(l=a||(a={})).Test="test",l.Experimental="experimental";var M={Templates:[{label:"Empty Script",snippet:"44194e1b37c780cc"},{label:"Empty Transaction",snippet:"7a3be0a4012944f9"}],"Flow Token":[{label:"Send Flow Token",snippet:"755aaaa49fb2048c"}]};let R={[a.Test]:{iconName:"TestPlan"},[a.Experimental]:{iconName:"ATPLogo"}},O=e=>{let t=[];return Object.entries(M).forEach((n,i)=>{let[s,l]=n,a={key:i.toString(),text:s,itemType:A.n.Header},r=l.map((t,n)=>({key:"".concat(i,"-").concat(n),text:t.label,iconProps:t.icon?{iconName:t.icon}:L(t.type),onClick:()=>e(t)}));t.push(a,...r)}),t},L=e=>{if(e&&e in R)return R[e]};var B=n(20640),z=n.n(B),W=n(16407),Z=n(53234),$=n(52627),q=e=>{let{visible:t,snippetId:n,originUrl:i=null===(o=window)||void 0===o?void 0:null===(r=o.location)||void 0===r?void 0:r.origin,onDismiss:s,target:l}=e,{semanticColors:{bodyBackground:a}}=(0,g.F)(),c=(0,u.useMemo)(()=>({children:"Copy link",onClick:()=>{z()("".concat(i,"/snippet/").concat(n)),null==s||s(),console.log("snippet:",n)}}),[n,i,s]);return t?(0,d.jsxs)(W.l,{calloutProps:{directionalHint:Z.b.bottomCenter},isWide:!0,hasCloseButton:!0,headline:"Share successful",onDismiss:s,target:l,primaryButtonProps:c,children:[(0,d.jsx)("span",{children:"Your snippet is available at "}),(0,d.jsx)($.r,{href:"".concat(i,"/snippet/").concat(n),target:"_blank",underline:!0,styles:{root:[{color:a}]},children:"".concat(i,"/snippet/").concat(n)})]}):(0,d.jsx)(d.Fragment,{})},G=n(34225),X=n(87066);let K="".concat(E.ZP.serverUrl),J=X.Z.create({baseURL:K});class Y{get axiosClient(){return this.client}async getSnippet(e){return this.get("/".concat(e))}async shareSnippet(e,t){return this.post("/",{code:e,env:t})}async get(e){try{return(await this.client.get(e)).data}catch(e){throw Y.extractAPIError(e)}}async post(e,t,n){try{return(await this.client.post(e,t,n)).data}catch(e){throw Y.extractAPIError(e)}}static extractAPIError(e){var t,n,i;return Error(null!==(i=null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)&&void 0!==i?i:e.message)}constructor(e){this.client=e}}var Q=new Y(J),ee=n(93162),et=n(81899),en=n(2376);function ei(e){return!!Array.isArray(e)&&0!==e.length&&e.every(e=>e&&"UInt8"===e.type&&void 0!==e.value)}let es=async(e,t)=>{try{let n=new Blob([t],{type:"text/plain;charset=utf-8"});(0,ee.saveAs)(n,e)}catch(e){alert("Failed to save a file: ".concat(e))}},el=async e=>{await et.vc(E.ZP.networkConfig[E.vm.FlowMainnet]),I.HS.settings.runtime=E.vm.FlowMainnet,(0,T.Vx)(I.HS,"settings");try{var t=await et.lW([et.fo(e)]).then(et.Jx).then(e=>(I.HS.editor.code=(0,en.Z)(e.script),I.HS.settings.runtime=E.vm.FlowMainnet,(0,T.Vx)(I.HS,"settings"),(0,T.Vx)(I.HS,"editor"),!0));if(t)return}catch(e){}await et.vc(E.ZP.networkConfig[E.vm.FlowTestnet]),I.HS.settings.runtime=E.vm.FlowTestnet,(0,T.Vx)(I.HS,"settings");try{if(t=await et.lW([et.fo(e)]).then(et.Jx).then(e=>(I.HS.editor.code=(0,en.Z)(e.script),(0,T.Vx)(I.HS,"editor"),!0)))return}catch(e){}},ea=async()=>{let e=e=>{I.HS.status.events=[...I.HS.status.events,...e],(0,T.Vx)(I.HS,"status")},t=()=>{I.HS.status.loading=!1,(0,T.Vx)(I.HS,"status")};try{await et.vc(E.ZP.networkConfig[I.HS.settings.runtime]);let l=I.HS.editor.jsonArgs,a=I.HS.editor.code;I.HS.status.lastError="",I.HS.status.events=[],I.HS.status.loading=!0,(0,T.Vx)(I.HS,"status");var n=[];if(l&&(n=l.map(e=>et.R9(e,t=>JSON.parse(e)))),-1===a.indexOf("transaction")){let s=await et.lW([et.WC(n),et._v(a),et.b9(99999)]);var i={};i[s.encodedData.type]=function e(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;if("Array"===t.type){let i=t.value;return ei(i)?i.map(e=>parseInt(e.value).toString(16).padStart(2,"0")).join(""):e(i,n)}if(Array.isArray(t)){let i=[];for(let s of t)i.push(e(s,n));return i}if("Dictionary"===t.type){let i={};return t.value.forEach(t=>{let s=e(t.key,n);n&&s&&0===s.toString().indexOf("A.")&&(s=s.toString().split(".").slice(2).join(".")),i[s]=e(t.value,n)}),i}if("Optional"===t.type)return e(t.value,n);if("Type"===t.type)return e(t.value.staticType,n);if("Void"===t.type)return null;if("String"===t.type)return t.value;if("Bool"===t.type)return"true"===t.value||!0===t.value;if("Character"===t.type||"Address"===t.type)return t.value;if("Path"===t.type)return t.value.domain+"/"+t.value.identifier;if(t.type&&"string"==typeof t.type&&(t.type.indexOf("Int")>-1||t.type.indexOf("Word")>-1))return"UInt64"===t.type||"Int128"===t.type||"Int256"===t.type||"UInt128"===t.type||"UInt256"===t.type||"Word128"===t.type||"Word256"===t.type?t.value:parseInt(t.value);if(t.type&&"string"==typeof t.type&&t.type.indexOf("Fix")>-1)return parseFloat(t.value);if("Reference"===t.kind)return"&"+t.type.typeID;if(t.kind&&"Capability"===t.kind)return t.type.type.typeID;if("Capability"===t.type){let i={};return i.address=t.value.address,i.path=e(t.value.path,n),i.borrowType=e(t.value.borrowType,n),{"<Capability>":i}}if("Struct"===t.type||"Resource"===t.type||"Event"===t.type||"Contract"===t.type||"Enum"===t.type)return e(t.value,n);if("InclusiveRange"===t.type){let i=e(t.value.start,n),s=e(t.value.end,n);return{"<InclusiveRange>":{start:i,end:s,step:e(t.value.step,n)}}}if(null!=t.id&&null!=t.fields){if(1===t.fields.length&&"rawValue"===t.fields[0].name){let i=e(t.fields[0].value,n);return"".concat(t.id,"(rawValue: ").concat(i,")")}let i={};for(let s in t.fields){let l=t.fields[s],a=l.name,r=l.value,o=a;r&&"Array"===r.type&&ei(r.value)&&(o="".concat(a," [UInt8]")),i[o]=e(r,n)}let s={};return n?"string"==typeof t.id&&0===t.id.indexOf("A.")?s[t.id.split(".").slice(2).join(".")]=i:"string"==typeof t.id&&0===t.id.indexOf("s.")?s[t.id.substring(2)]=i:s[t.id]=i:s[t.id]=i,s}return void 0!==t.value?t.value:null}(s.encodedData,!0),await e([{Kind:"Result",Data:i}]),t()}else{if(!await et.ar.snapshot()){var s=await et.YR();alert(s)}let i=await et.JG({cadence:a,args:(e,t)=>n,proposer:et.ar,payer:et.ar,limit:9999});console.log(i),await e([{Kind:"Transaction ID",Data:i}]);let l=await et.tx(i).onceSealed();console.log(l),e([{Kind:"Transaction Result",Data:l}]),t()}}catch(e){var l=e.error||e.errorMessage||e.message||e.toString();l.indexOf("error caused by:")>-1&&(l=l.split("error caused by:")[1]),I.HS.status.lastError=l,I.HS.status.loading=!1,I.HS.status.events=[],(0,T.Vx)(I.HS,"status")}},er="Header__btn--share",eo={settings:{showShareMessage:!1,showSettings:!1,shareCreated:!1,snippetID:""}},ec=e=>{var t;let{embed:n}=e,i=(0,T.D$)(I.HS,"settings"),s=(0,T.D$)(I.HS,"editor"),l=(0,T.D$)(I.HS,"status"),a=(0,T.D$)(eo,"settings"),r=document.createElement("input");r.type="file",r.accept=".cdc",r.addEventListener("change",()=>v());let[o,c]=(0,u.useState)(r),p=O(e=>y(e)),[g,x]=(0,u.useState)(null);(0,u.useEffect)(()=>{x((0,G.Bp)((0,I.jS)(i.darkMode,i.useSystemTheme)))},[i.darkMode,i.useSystemTheme]);let f=(0,m.useRouter)(),v=()=>{var e;let t=null==o?void 0:null===(e=o.files)||void 0===e?void 0:e.item(0);if(!t)return;let n=new FileReader;n.onload=e=>{var n,i;s.fileName=t.name,s.code=null===(n=e.target)||void 0===n?void 0:n.result,console.log(t.name),console.log(null===(i=e.target)||void 0===i?void 0:i.result),console.log(s.code),(0,T.Vx)(I.HS,"editor")},n.onerror=e=>{alert("Failed to import a file: ".concat(e))},n.readAsText(t,"UTF-8")},y=e=>{if(e.snippet){f.push("/snippet/".concat(e.snippet));return}s.code=e.text,s.fileName=e.label+".cdc",(0,T.Vx)(I.HS,"editor")},b=e=>{a.showSettings=!1,(0,T.Vx)(eo,"settings")};return""!==n&&"interactive"!==n?(0,d.jsx)(d.Fragment,{}):(0,d.jsxs)("header",{className:"header",style:{backgroundColor:null==g?void 0:null===(t=g.palette)||void 0===t?void 0:t.white},children:[(0,d.jsx)("img",{style:{marginLeft:20},src:"/flow.svg",className:"header__logo",alt:"Flow Logo"}),(0,d.jsx)(h.X,{className:"header__commandBar",items:""!==n?[{key:"run",text:"Run",ariaLabel:"Run program (Ctrl+Enter)",title:"Run program (Ctrl+Enter)",iconProps:{iconName:"Play"},disabled:l.loading,onClick:()=>{ea()}},{key:"download",text:"Download",iconProps:{iconName:"Download"},disabled:l.loading,onClick:()=>{es(s.fileName,s.code)}}]:[{key:"openFile",text:"Open",split:!0,iconProps:{iconName:"OpenFile"},disabled:l.loading,onClick:()=>null==o?void 0:o.click(),subMenuProps:{items:p}},{key:"run",text:"Run",ariaLabel:"Run program (Ctrl+Enter)",title:"Run program (Ctrl+Enter)",iconProps:{iconName:"Play"},disabled:l.loading,onClick:()=>{ea()}},{key:"share",text:"Share",className:er,iconProps:{iconName:"Share"},disabled:l.loading,onClick:()=>{eo.settings.showShareMessage=!0,l.loading=!0,(0,T.Vx)(I.HS,"status"),(0,T.Vx)(eo,"settings"),Q.shareSnippet(s.code,i.runtime).then(e=>{let{snippetID:t}=e;t&&(f.push("/snippet/".concat(t)),a.shareCreated=!0,a.snippetID=t,(0,T.Vx)(eo,"settings")),l.loading=!1,(0,T.Vx)(I.HS,"status")}).catch(e=>{l.loading=!1,l.lastError=e.message,(0,T.Vx)(I.HS,"status")})}},{key:"download",text:"Download",iconProps:{iconName:"Download"},disabled:l.loading,onClick:()=>{es(s.fileName,s.code)}},{key:"settings",text:"Settings",ariaLabel:"Settings",iconProps:{iconName:"Settings"},disabled:l.loading,onClick:()=>{eo.settings.showSettings=!0,(0,T.Vx)(eo,"settings")}}],farItems:("embed"===n?[]:[{key:"toggleTheme",text:"Toggle Dark Mode",ariaLabel:"Toggle Dark Mode",iconOnly:!0,hidden:i.useSystemTheme,iconProps:{iconName:i.darkMode?"Brightness":"ClearNight"},onClick:()=>{(0,T.t8)(i,"darkMode",!i.darkMode),(0,T.Vx)(I.HS,"settings")}}]).filter(e=>{let{hidden:t}=e;return!t}),ariaLabel:"CodeEditor menu"}),(0,d.jsx)(q,{visible:!!(a.showShareMessage&&a.shareCreated&&a.snippetID),target:".".concat(er),snippetId:a&&a.snippetID?a.snippetID:void 0,onDismiss:()=>{a.showShareMessage=!1,(0,T.Vx)(eo,"settings")}}),(0,d.jsx)(U,{onClose:e=>b(e),isOpen:a.showSettings})]})};var ed=n(67462),eu=n(12515);let em=[{id:"mainnet",name:"Mainnet",type:"folder",isExpanded:!1,children:[{id:"mainnet-scripts",name:"Scripts",type:"folder",network:"mainnet",children:[]},{id:"mainnet-transactions",name:"Transactions",type:"folder",network:"mainnet",children:[]}]},{id:"testnet",name:"Testnet",type:"folder",isExpanded:!1,children:[{id:"testnet-scripts",name:"Scripts",type:"folder",network:"testnet",children:[]},{id:"testnet-transactions",name:"Transactions",type:"folder",network:"testnet",children:[]}]}];var eh=()=>{let e=(0,T.D$)(I.HS,"UI"),t=(0,T.D$)(I.HS,"editor"),[n,i]=(0,u.useState)(null),[s,l]=(0,u.useState)(em),[a,r]=(0,u.useState)(!1),o=async()=>{console.log("Login functionality requires Supabase configuration"),alert("Supabase authentication needs to be configured.\n\nPlease add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY to your .env.local file.")},c=async()=>{i(null)},m=()=>{e.sidebar.isOpen=!e.sidebar.isOpen,(0,T.Vx)(I.HS,"UI")},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return t.map(t=>t.id===e?(0,ed._)((0,p._)({},t),{isExpanded:!t.isExpanded}):t.children?(0,ed._)((0,p._)({},t),{children:h(e,t.children)}):t)},g=e=>{"file"===e.type&&e.code&&(t.code=e.code,t.fileName=e.name,(0,T.Vx)(I.HS,"editor"))},x=async(e,i,s)=>{let l="script"===i?"new_script.cdc":"new_transaction.cdc";t.code="script"===i?"// New Script\npub fun main() {\n  // Your code here\n}\n":"// New Transaction\ntransaction {\n  prepare(signer: AuthAccount) {\n    // Your code here\n  }\n  execute {\n  }\n}\n",t.fileName=l,(0,T.Vx)(I.HS,"editor"),n&&console.log("Save to Supabase:",{fileName:l,fileType:i,network:s})},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>(0,d.jsxs)("div",{style:{marginLeft:"".concat(16*t,"px")},children:[(0,d.jsxs)("div",{className:"sidebar-tree-item",onClick:()=>{"folder"===e.type?l(h(e.id)):g(e)},children:["folder"===e.type&&(0,d.jsx)("span",{className:"sidebar-tree-icon",children:e.isExpanded?(0,d.jsx)(eu.bTu,{size:14}):(0,d.jsx)(eu.Tfp,{size:14})}),(0,d.jsx)("span",{className:"sidebar-tree-icon",children:"folder"===e.type?(0,d.jsx)(eu.QoU,{size:16}):(0,d.jsx)(eu.tHe,{size:16})}),(0,d.jsx)("span",{className:"sidebar-tree-label",children:e.name}),"folder"===e.type&&e.network&&(0,d.jsxs)("div",{className:"sidebar-tree-actions",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("button",{className:"sidebar-tree-add-btn",onClick:()=>x(e.id,"script",e.network),title:"Add Script",children:[(0,d.jsx)(eu.OvN,{size:14}),"S"]}),(0,d.jsxs)("button",{className:"sidebar-tree-add-btn",onClick:()=>x(e.id,"transaction",e.network),title:"Add Transaction",children:[(0,d.jsx)(eu.OvN,{size:14}),"T"]})]})]}),"folder"===e.type&&e.isExpanded&&e.children&&f(e.children,t+1)]},e.id))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"sidebar-toggle",onClick:m,"aria-label":"Toggle Sidebar",children:(0,d.jsx)(eu.cur,{size:20})}),(0,d.jsxs)("div",{className:"sidebar ".concat(e.sidebar.isOpen?"sidebar--open":""),children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsx)("h2",{className:"sidebar-title",children:"Snippets"}),(0,d.jsx)("button",{className:"sidebar-close",onClick:m,"aria-label":"Close Sidebar",children:(0,d.jsx)(eu.q5L,{size:20})})]}),(0,d.jsx)("div",{className:"sidebar-auth",children:n?(0,d.jsxs)("div",{className:"sidebar-user",children:[(0,d.jsx)("div",{className:"sidebar-user-info",children:(0,d.jsx)("span",{className:"sidebar-user-email",children:n.email})}),(0,d.jsx)("button",{className:"sidebar-logout-btn",onClick:c,children:(0,d.jsx)(eu.xqh,{size:16})})]}):(0,d.jsxs)("div",{className:"sidebar-login",children:[(0,d.jsx)("p",{className:"sidebar-login-message",children:"Login to save and manage your snippets"}),(0,d.jsx)("button",{className:"sidebar-login-btn",onClick:o,children:"Login with GitHub"})]})}),(0,d.jsx)("div",{className:"sidebar-tree",children:f(s)})]}),e.sidebar.isOpen&&(0,d.jsx)("div",{className:"sidebar-overlay",onClick:m})]})},ep=n(82898),eg=n(40054);let ex=[(i=eg.DC.Shift|eg.VD.Enter,s="editor.action.insertLineAfter",{keybinding:i,callback:e=>{var t;return null===(t=e.getAction(s))||void 0===t?void 0:t.run()}})],ef=e=>{ex.forEach(t=>{let{keybinding:n,callback:i}=t;return e.addCommand(n,t=>i(e,t))})},ev=e=>{let{selectOnLineNumbers:t,mouseWheelZoom:n,smoothScrolling:i,cursorBlinking:s,fontLigatures:l,cursorStyle:a,contextMenu:r}=e;return{selectOnLineNumbers:t,mouseWheelZoom:n,smoothScrolling:i,cursorBlinking:s,cursorStyle:a,fontLigatures:l,fontFamily:e.fontFamily?(0,H.BN)(e.fontFamily):(0,H.M1)(),showUnused:!0,automaticLayout:!0,minimap:{enabled:e.minimap},contextmenu:r}},ey="cadence";var eb=n(37340),eS=n(41686);function ew(){let e=(0,eb._)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ",";\n  position: relative;\n"]);return ew=function(){return e},e}function ej(){let e=(0,eb._)(['\n  font-weight: normal;\n  margin-left: 4px;\n  &:before{\n    content: "(";\n  }\n  &:after{\n    content: ")";\n  }\n']);return ej=function(){return e},e}function eC(){let e=(0,eb._)(["\n  border: 1px solid #C4C4C4;\n  border-radius: 5px;\n  font-size: 12px;\n  color: #000;\n  padding: 8px;\n  width: 100%;\n  \n  margin-bottom: 5px;\n  &:last-child{\n    margin-bottom: 0;\n  }\n  box-sizing: border-box;\n\n  ::placeholder {\n    color: #999;\n  }\n"]);return eC=function(){return e},e}function ek(){let e=(0,eb._)(["\n  display: inline;\n  font-size: 12px;\n  color: red;\n"]);return ek=function(){return e},e}let e_=eS.ZP.div(ew(),e=>{let{mb:t="0"}=e;return t});eS.ZP.span(ej()),eS.ZP.input(eC());let eN=eS.ZP.p(ek());var eE=n(90663),eH=e=>{let{argument:t,error:n,onChange:i}=e,{name:s,type:l}=t;return(0,d.jsxs)(e_,{children:[(0,d.jsx)(eE.n,{label:"".concat(s," : (").concat(l,")"),name:"".concat(s,"-").concat(l),onChange:e=>{let{value:t}=e.target;i(s,t)}}),n&&(0,d.jsx)(eN,{children:n})]})};let eT=e=>{let{list:t,errors:n,onChange:i}=e,s=(0,g.F)(),l=(0,C.QD)(s);return(0,d.jsx)("div",{className:l.body,children:t.length>0&&t.map(e=>(0,d.jsx)(eH,{argument:e,onChange:i,error:n[e.name]},e.name))})};var eI=n(75997),eF=n.g;let eP=()=>{let e=Error("not implemented");return e.code="ENOSYS",e};if(!eF.fs){let e="";eF.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(t,n){let i=(e+=eV.decode(n)).lastIndexOf("\n");return -1!=i&&(console.log(e.substring(0,i)),e=e.substring(i+1)),n.length},write(e,t,n,i,s,l){if(0!==n||i!==t.length||null!==s){l(eP());return}l(null,this.writeSync(e,t))},chmod(e,t,n){n(eP())},chown(e,t,n,i){i(eP())},close(e,t){t(eP())},fchmod(e,t,n){n(eP())},fchown(e,t,n,i){i(eP())},fstat(e,t){t(eP())},fsync(e,t){t(null)},ftruncate(e,t,n){n(eP())},lchown(e,t,n,i){i(eP())},link(e,t,n){n(eP())},lstat(e,t){t(eP())},mkdir(e,t,n){n(eP())},open(e,t,n,i){i(eP())},read(e,t,n,i,s,l){l(eP())},readdir(e,t){t(eP())},readlink(e,t){t(eP())},rename(e,t,n){n(eP())},rmdir(e,t){t(eP())},stat(e,t){t(eP())},symlink(e,t,n){n(eP())},truncate(e,t,n){n(eP())},unlink(e,t){t(eP())},utimes(e,t,n,i){i(eP())}}}if(eF.process||(eF.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw eP()},pid:-1,ppid:-1,umask(){throw eP()},cwd(){throw eP()},chdir(){throw eP()}}),!eF.crypto)throw Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!eF.performance)throw Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!eF.TextEncoder)throw Error("globalThis.TextEncoder is not available, polyfill required");if(!eF.TextDecoder)throw Error("globalThis.TextDecoder is not available, polyfill required");let eD=new TextEncoder("utf-8"),eV=new TextDecoder("utf-8");class eU{run(e){var t,n,i,s;return t=this,n=void 0,i=void 0,s=function*(){if(!(e instanceof WebAssembly.Instance))throw Error("Go.run: WebAssembly.Instance expected");this._inst=e,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,eF,this],this._goRefCounts=Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[eF,5],[this,6]]),this._idPool=[],this.exited=!1;let t=4096,n=e=>{let n=t,i=eD.encode(e+"\0");return new Uint8Array(this.mem.buffer,t,i.length).set(i),(t+=i.length)%8!=0&&(t+=8-t%8),n},i=this.argv.length,s=[];this.argv.forEach(e=>{s.push(n(e))}),s.push(0),Object.keys(this.env).sort().forEach(e=>{s.push(n("".concat(e,"=").concat(this.env[e])))}),s.push(0);let l=t;if(s.forEach(e=>{this.mem.setUint32(t,e,!0),this.mem.setUint32(t+4,0,!0),t+=8}),t>=12288)throw Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,l),this.exited&&this._resolveExitPromise(),yield this._exitPromise},new(i||(i=Promise))(function(e,l){function a(e){try{o(s.next(e))}catch(e){l(e)}}function r(e){try{o(s.throw(e))}catch(e){l(e)}}function o(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(a,r)}o((s=s.apply(t,n||[])).next())})}_resume(){if(this.exited)throw Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){let t=this;return function(){let n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}constructor(){this.argv=["js"],this.env={},this.exit=e=>{0!==e&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;let e=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},t=e=>this.mem.getUint32(e+0,!0)+4294967296*this.mem.getInt32(e+4,!0),n=e=>{let t=this.mem.getFloat64(e,!0);if(0===t)return;if(!isNaN(t))return t;let n=this.mem.getUint32(e,!0);return this._values[n]},i=(e,t)=>{if("number"==typeof t&&0!==t){if(isNaN(t)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(void 0===t){this.mem.setFloat64(e,0,!0);return}let n=this._ids.get(t);void 0===n&&(void 0===(n=this._idPool.pop())&&(n=this._values.length),this._values[n]=t,this._goRefCounts[n]=0,this._ids.set(t,n)),this._goRefCounts[n]++;let i=0;switch(typeof t){case"object":null!==t&&(i=1);break;case"string":i=2;break;case"symbol":i=3;break;case"function":i=4}this.mem.setUint32(e+4,2146959360|i,!0),this.mem.setUint32(e,n,!0)},s=e=>{let n=t(e+0),i=t(e+8);return new Uint8Array(this._inst.exports.mem.buffer,n,i)},l=e=>{let i=t(e+0),s=t(e+8),l=Array(s);for(let e=0;e<s;e++)l[e]=n(i+8*e);return l},a=e=>{let n=t(e+0),i=t(e+8);return eV.decode(new DataView(this._inst.exports.mem.buffer,n,i))},r=Date.now()-performance.now();this.importObject={_gotest:{add:(e,t)=>e+t},gojs:{"runtime.wasmExit":e=>{e>>>=0;let t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{let n=t((e>>>=0)+8),i=t(e+16),s=this.mem.getInt32(e+24,!0);eF.fs.writeSync(n,new Uint8Array(this._inst.exports.mem.buffer,i,s))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{e((t>>>=0)+8,(r+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;let n=new Date().getTime();e(t+8,n/1e3),this.mem.setInt32(t+16,n%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;let n=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(n,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(n);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},t(e+8))),this.mem.setInt32(e+16,n,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;let t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(s(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;let t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,0===this._goRefCounts[t]){let e=this._values[t];this._values[t]=null,this._ids.delete(e),this._idPool.push(t)}},"syscall/js.stringVal":e=>{i((e>>>=0)+24,a(e+8))},"syscall/js.valueGet":e=>{let t=Reflect.get(n((e>>>=0)+8),a(e+16));i((e=this._inst.exports.getsp()>>>0)+32,t)},"syscall/js.valueSet":e=>{Reflect.set(n((e>>>=0)+8),a(e+16),n(e+32))},"syscall/js.valueDelete":e=>{Reflect.deleteProperty(n((e>>>=0)+8),a(e+16))},"syscall/js.valueIndex":e=>{i((e>>>=0)+24,Reflect.get(n(e+8),t(e+16)))},"syscall/js.valueSetIndex":e=>{Reflect.set(n((e>>>=0)+8),t(e+16),n(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{let t=n(e+8),s=Reflect.get(t,a(e+16)),r=l(e+32),o=Reflect.apply(s,t,r);e=this._inst.exports.getsp()>>>0,i(e+56,o),this.mem.setUint8(e+64,1)}catch(t){i((e=this._inst.exports.getsp()>>>0)+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{let t=n(e+8),s=l(e+16),a=Reflect.apply(t,void 0,s);e=this._inst.exports.getsp()>>>0,i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i((e=this._inst.exports.getsp()>>>0)+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{let t=n(e+8),s=l(e+16),a=Reflect.construct(t,s);e=this._inst.exports.getsp()>>>0,i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i((e=this._inst.exports.getsp()>>>0)+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":t=>{e((t>>>=0)+16,parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;let s=eD.encode(String(n(t+8)));i(t+16,s),e(t+24,s.length)},"syscall/js.valueLoadString":e=>{let t=n((e>>>=0)+8);s(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,n(e+8) instanceof n(e+16)?1:0)},"syscall/js.copyBytesToGo":t=>{let i=s((t>>>=0)+8),l=n(t+32);if(!(l instanceof Uint8Array||l instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let a=l.subarray(0,i.length);i.set(a),e(t+40,a.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{let i=n((t>>>=0)+8),l=s(t+16);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let a=l.subarray(0,i.length);i.set(a),e(t+40,a.length),this.mem.setUint8(t+48,1)},debug:e=>{console.log(e)}}}}}let eA=new eU;(c||(c={})).methodName="cadence/checkCompleted";class eM{static async load(e,t){if(this.isLoaded&&this.lastSource===e)return;let n=await fetch(e);console.log("loaded",n.status,n.ok),console.log(eA.importObject);let i=await WebAssembly.instantiateStreaming(n,eA.importObject);console.log("module done");let s=new Map,l=new TextDecoder("utf-8");window.fs.writeSync=function(e,t){let n=s.get(e);n||(n="");let i=(n+=l.decode(t)).lastIndexOf("\n");if(-1!==i){let t=n.substr(0,i+1);console.debug("(FD ".concat(e,"):"),t),n=n.substr(i+1)}return s.set(e,n),t.length},console.log("running"),eA.run(i.instance),this.isLoaded=!0,this.lastSource=e}static functionName(e){return"__".concat(eM.functionNamePrefix,"_").concat(e,"__")}functionName(e){return"__".concat(eM.functionNamePrefix,"_").concat(this.id,"_").concat(e,"__")}static async create(e,t){return await this.load("https://cdn.dnz.dev/cadenceNew2.wasm",e),new eM(t)}updateCodeGetter(e){window[this.functionName("getAddressCode")]=t=>{if(e)return e(t)}}constructor(e){this.isClientClosed=!1,this.id=window[eM.functionName("start")](),window[this.functionName("toClient")]=t=>{e.toClient(JSON.parse(t))},window[this.functionName("getAddressCode")]=t=>{if(e.getAddressCode)return e.getAddressCode(t)},window[this.functionName("onServerClose")]=()=>{e.onServerClose&&e.onServerClose()},e.toServer=(e,t)=>{window[this.functionName("toServer")](e,JSON.stringify(t))},e.onClientClose=()=>{this.isClientClosed||(this.isClientClosed=!0,window[this.functionName("onClientClose")]())}}}eM.isLoaded=!1,eM.lastSource="",eM.functionNamePrefix="CADENCE_LANGUAGE_SERVER";var eR=n(39054),eO=n(73722);let eL=!1;async function eB(e,t,n,i){let{setLanguageServer:s,setCallbacks:l}=i,a=await eM.create(e,t);new Promise(()=>{let e=setInterval(()=>{null!==t.toServer&&(clearInterval(e),t.getAddressCode=n,l(t),s(a),console.log("%c LS: Is Up!","color: #00FF00"))},100)})}let ez=async(e,t,n)=>{if(t){let t=function(e){let t=(0,eR.createMessageConnection)({onError:()=>eR.Disposable.create(()=>{}),onClose:()=>eR.Disposable.create(()=>{}),onPartialMessage:()=>eR.Disposable.create(()=>{}),listen:t=>(e.toClient=e=>t(e),eR.Disposable.create(()=>{})),dispose(){console.log("-------------------------->","Language Client is closed. Do something!"),e.onClientClose()}},{onClose:()=>eR.Disposable.create(()=>{}),onError:()=>eR.Disposable.create(()=>{}),async write(t){"textDocument/didChange"===t.method&&(window.lastChangeMessage=t),e.toServer(null,t)},end(){},dispose(){e.onClientClose()}},{error(e){console.error(e)},warn(e){console.warn(e)},info(e){console.info(e)},log(e){console.log(e)}});return new eO.MonacoLanguageClient({name:"Cadence Language Client",clientOptions:{documentSelector:[ey],errorHandler:{error:()=>eO.ErrorAction.Continue,closed:()=>eO.CloseAction.DoNotRestart}},connectionProvider:{get:(e,n)=>Promise.resolve((0,eO.createConnection)(t,e,n))}})}(e);t.start(),await t.onReady(),n(t)}},eW=(0,u.createContext)(null);var eZ=e=>{let{newCadence:t,children:n}=e,i=function(e){let[t,n]=(0,u.useState)(null),[i,s]=(0,u.useState)(null),[l,a]=(0,u.useState)({toServer:null,onClientClose:null,onServerClose:null,toClient:null,getAddressCode(e){}});var r={};let o=async(e,t)=>{let[n,i]=e.split(".");for(;n.length<16;)n="0"+n;console.log(n);let s=await et.lW([et.D0("0x".concat(n))]),l=s.account.contracts;for(let e in console.log(s),l)console.log(e),r["".concat(n,".").concat(e)]=l[e];I.HS.editor.code=I.HS.editor.code+" ",(0,T.Vx)(I.HS,"editor")},c=e=>(console.log("GET CODE",e),null!=r[e])?(console.log("cached"),r[e]):(o(e,l).then(),null),d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("Restarting server...",e),eB(e,l,c,{setLanguageServer:n,setCallbacks:a}).then()};return(0,u.useEffect)(()=>{console.log("Installing monaco services"),eL||(eI.MonacoServices.install(ep.Fd),eL=!0),d(e)},[e]),(0,u.useEffect)(()=>{!i&&window&&ez(l,t,s).then()},[t]),{languageClient:i,languageServer:t,restartServer:d}}(t);return(0,d.jsx)(eW.Provider,{value:i,children:n})},e$=n(32207),eq=n(42141),eG=n(90512),eX=e=>{let{hidden:t,icon:n,desktopOnly:i,label:s,onClick:l}=e;return t?null:(0,d.jsx)("button",{className:(0,eG.Z)("PanelAction",i&&"PanelAction--desktopOnly"),title:s,onClick:l,children:n})},eK=e=>{let{label:t,commands:n}=e,{palette:{neutralLight:i,neutralDark:s,neutralQuaternaryAlt:l}}=(0,u.useContext)(eq.N);return(0,d.jsxs)("div",{className:"PanelHeader",style:{backgroundColor:i,color:s,"--pg-panel-action-hover-bg":l},children:[(0,d.jsx)("div",{className:"PanelHeader__side--left",children:(0,d.jsx)("span",{className:"PanelHeader__title",children:(0,d.jsx)("b",{children:t})})}),(0,d.jsx)("ul",{className:"PanelHeader__commands",children:n?Object.entries(n).map(e=>{let[t,n]=e;return(0,p._)({key:t},n)}).filter(e=>{let{hidden:t}=e;return!t}).map(e=>{var{key:t}=e,n=(0,e$._)(e,["key"]);return(0,d.jsx)("li",{children:(0,d.jsx)(eX,(0,p._)({},n))},t)}):null})]})},eJ=n(20104);function eY(){let e=(0,eb._)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    right: 0;\n    z-index: -1;\n"]);return eY=function(){return e},e}function eQ(){let e=(0,eb._)(["\n    position: absolute;\n    right:20px;\n    top:50px;\n    width: fit-content;\n    height: fit-content;\n    z-index: 1000;\n"]);return eQ=function(){return e},e}let e0=eS.ZP.div(eY()),e1=eS.ZP.div(eQ()),e2=e=>e.includes("{"),e8=e=>e.includes("["),e4=e=>e.includes("."),e6=e=>e2(e)||e8(e)||e4(e),e3=(e,t)=>e.startsWith(t)||e.startsWith("U"+t),e9=(e,t)=>{try{return JSON.parse(e),null}catch(e){return"Not a valid argument of type ".concat(t)}},e5=(e,t)=>{if(0===e.length)return"Value can't be empty";switch(!0){case"String"===t:return null;case e3(t,"Int"):if(isNaN(e)||""===e)return"Should be a valid Integer number";return null;case e3(t,"Word"):if(isNaN(e)||""===e)return"Should be a valid Word number";return null;case e3(t,"Fix"):if(isNaN(e)||""===e)return"Should be a valid fixed point number";return null;case e6(t):return e9(e,t);case"Address"===t:if(!e.match(/(^0x[\w\d]{16})|(^0x[\w\d]{1,4})/))return"Not a valid Address";return null;case"Bool"===t:if("true"!==e&&"false"!==e)return"Boolean values can be either true or false";return null;default:return null}};var e7=e=>{let{editor:t}=e,n=(0,u.useRef)(null),{languageClient:i}=(0,u.useContext)(eW),[s,l]=(0,u.useState)({}),a=(0,g.F)(),r=(0,C.QD)(a),[o,m]=(0,u.useState)({}),[h,x]=(0,u.useState)({}),f=(0,T.D$)(I.HS,"editor"),v=async()=>{let e;if(!i)return[];let n=S.map(e=>{let{name:t,type:n}=e,i=h[t];return"String"===n&&(null==i&&(i=""),i="".concat(i)),"UFix64"===n&&i&&0>i.indexOf(".")&&(i="".concat(i,".0")),"String"===n&&(i='"'.concat(i.replace(/"/g,'\\"'),'"')),i});try{var s;e=await i.sendRequest(eO.ExecuteCommandRequest.type,{command:"cadence.server.parseEntryPointArguments",arguments:[null==t?void 0:null===(s=t.getModel())||void 0===s?void 0:s.uri.toString(),n]})}catch(e){return[]}return S.map((t,n)=>JSON.stringify(e[n]))},y=async()=>{if(!i)return[];try{var e;let n=null==t?void 0:null===(e=t.getModel())||void 0===e?void 0:e.uri.toString();return await i.sendRequest(eO.ExecuteCommandRequest.type,{command:"cadence.server.getEntryPointParameters",arguments:[n]})||[]}catch(e){return[]}},b=()=>{n.current,n.current=i.onNotification(c.methodName,async e=>{if(e.valid){let e=await y();console.log("update params",e),l((0,ed._)((0,p._)({},s),{params:e}))}else l((0,ed._)((0,p._)({},s),{params:[]}))})},S=(0,u.useMemo)(()=>s.params||[],[s]),[w,j]=(0,u.useState)(!1);(0,u.useEffect)(()=>{i&&(console.log("set listener"),b())},[i]),(0,u.useEffect)(()=>{},[s]);let k=(0,u.useRef)(null),_=(e,t)=>{m(e.reduce((e,n)=>{let{name:i,type:s}=n,l=t[i];if(l){let t=e5(l,s);t&&(e[i]=t)}else"String"!==s&&(e[i]="Value can't be empty");return e},{}))};return((0,u.useEffect)(()=>{S.length&&_(S,h)},[S,h]),(0,u.useEffect)(()=>{0!==Object.keys(o).length&&v().then(e=>{f.jsonArgs=e})},[o,h,f]),S&&0!==S.length)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e0,{ref:k}),(0,d.jsx)(e1,{children:(0,d.jsxs)("div",{className:r.container,style:{minWidth:250,border:"2px solid ".concat(null==a?void 0:a.palette.neutralQuaternaryAlt),backgroundColor:null==a?void 0:a.palette.neutralLighter,zIndex:-1},children:[(0,d.jsx)(eK,{label:"Arguments",commands:{collapse:{hidden:!1,icon:w?(0,d.jsx)(eJ.qhg,{}):(0,d.jsx)(eJ.L2V,{}),label:w?"Expand":"Collapse",onClick:()=>j(!w)}}}),!w&&(0,d.jsx)(eT,{list:S,errors:o,onChange:(e,t)=>{let n=e.toString();x((0,ed._)((0,p._)({},h),{[n]:t}))}})]})})]}):null},te=()=>{let[e,t]=(0,u.useState)(null),[n,i]=(0,u.useState)(null),s=(0,T.D$)(I.HS,"settings"),l=(0,T.D$)(I.HS,"editor"),a=(0,T.D$)(I.HS,"status"),r=(0,T.D$)(I.HS,"monaco"),o=(e,t)=>{i(e),t.languages.register({id:ey,extensions:[".cdc"],aliases:["CDC","cdc"]}),t.languages.setMonarchTokensProvider(ey,{keywords:["if","else","return","continue","break","while","pre","post","prepare","execute","import","from","create","destroy","priv","pub","get","set","log","emit","event","init","struct","interface","fun","let","var","resource","access","all","contract","self","transaction"],typeKeywords:["AnyStruct","AnyResource","Void","Never","String","Character","Bool","Self","Int8","Int16","Int32","Int64","Int128","Int256","UInt8","UInt16","UInt32","UInt64","UInt128","UInt256","Word8","Word16","Word32","Word64","Word128","Word256","Fix64","UFix64"],operators:["<-","<=",">=","==","!=","+","-","*","/","%","&","!","&&","||","?","??",":","=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w]*/,"type.identifier"],{include:"@whitespace"},[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]]}}),[{id:"clear",label:"Reset contents",contextMenuGroupId:"navigation",run:()=>{l.code="",(0,T.Vx)(I.HS,"editor")}},{id:"run-code",label:"Build And Run Code",contextMenuGroupId:"navigation",keybindings:[eg.DC.CtrlCmd|eg.VD.Enter],run:()=>{ea()}}].forEach(t=>e.addAction(t)),ef(e)},c=()=>{e&&clearTimeout(e),t(setTimeout(async()=>{t(null);let e=eg.j6.getModelMarkers({});a.markers=e,(0,T.Vx)(I.HS,"status")},1e3))},m=(e,t)=>{l.code=e,(0,T.Vx)(I.HS,"editor"),c()},h=ev(r);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ep.ZP,{language:"cadence",theme:s.darkMode?"vs-dark":"vs-light",value:l.code,options:h,onChange:(e,t)=>m(e,t),editorDidMount:(e,t)=>o(e,t)}),n&&(0,d.jsx)(e7,{editor:n})]})},tt=e=>{let{children:t}=e;return(0,d.jsx)("div",{style:{background:"#000",flex:"1 1",overflow:"hidden"},children:t})},tn=n(46312),ti=n(55171),ts=n.n(ti),tl=e=>{let{data:t,kind:n}=e,i=(0,T.D$)(I.HS,"settings"),s="evalEvent__msg evalEvent__msg--".concat(n),l="string"==typeof t;return(0,d.jsxs)("div",{className:"evalEvent",children:[l?(0,d.jsxs)("pre",{className:s,children:[(0,d.jsxs)("b",{children:[n,":"]})," ",t]}):(0,d.jsxs)("pre",{className:s,children:[(0,d.jsxs)("b",{children:[n,":"]}),(0,d.jsx)(ts(),{theme:i.darkMode?"ocean":"rjv-default",style:{backgroundColor:"transparent"},name:!1,src:t})]}),(0,d.jsx)("span",{className:"evalEvent__delay",children:""})]})},ta=()=>{let e;let{palette:t}=(0,g.F)(),n=(0,T.D$)(I.HS,"status"),i={backgroundColor:null==t?void 0:t.neutralLight,color:null==t?void 0:t.neutralDark,fontFamily:(0,H.M1)()};return e=n.lastError?(0,d.jsxs)(w.c,{messageBarType:j.f.error,isMultiline:!0,children:[(0,d.jsx)("b",{className:"app-preview__label",children:"Error"}),(0,d.jsx)("pre",{className:"code",children:n.lastError})]}):n.events?n.events.map((e,t)=>{let{Data:n,Kind:i}=e;return(0,d.jsx)(tl,{data:n,kind:i},t)}):(0,d.jsx)("span",{children:'Press "Run" to execute script.'}),(0,d.jsx)("div",{className:"app-preview",style:i,children:(0,d.jsx)("div",{className:"app-preview__content",children:e})})};let tr={top:"ResizablePreview__handle--top",left:"ResizablePreview__handle--left"};var to=()=>{let{palette:{accent:e},semanticColors:{buttonBorder:t}}=(0,g.F)(),n=(0,T.D$)(I.HS,"UI"),i=(0,u.useCallback)((e,t,i,s)=>{switch(n.panel.layout){case C.ms.Vertical:n.panel.height=n.panel.height+s.height,(0,T.Vx)(I.HS,"UI");return;case C.ms.Horizontal:n.panel.width=n.panel.width+s.width,(0,T.Vx)(I.HS,"UI");return;default:return}},[n.panel]);n.panel.height||(n.panel.height=0),n.panel.width||(n.panel.width=0);let s={height:n.panel.layout===C.ms.Vertical?n.panel.height:"100%",width:n.panel.layout===C.ms.Horizontal?n.panel.width:"100%"},l={top:!n.panel.collapsed&&n.panel.layout===C.ms.Vertical,right:!1,bottom:!1,left:!n.panel.collapsed&&n.panel.layout===C.ms.Horizontal,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},a=n.panel.collapsed&&n.panel.layout===C.ms.Vertical;return console.log(s),(0,d.jsxs)(tn.e,{className:(0,eG.Z)("ResizablePreview",a&&"ResizablePreview--collapsed","ResizablePreview--".concat(n.panel.layout)),handleClasses:tr,size:s,enable:l,onResizeStop:i,style:{"--pg-handle-active-color":e,"--pg-handle-default-color":t},children:[(0,d.jsx)(eK,{label:"Output",commands:{"vertical-layout":{hidden:n.panel.layout===C.ms.Vertical,icon:(0,d.jsx)(eJ.Gaf,{}),label:"Use vertical layout",onClick:()=>{n.panel.layout=C.ms.Vertical,(0,T.Vx)(I.HS,"UI")}},"horizontal-layout":{desktopOnly:!0,hidden:n.panel.layout===C.ms.Horizontal,icon:(0,d.jsx)(eJ.KH2,{}),label:"Use horizontal layout",onClick:()=>{n.panel.layout=C.ms.Horizontal,(0,T.Vx)(I.HS,"UI")}},collapse:{hidden:n.panel.layout===C.ms.Horizontal,icon:n.panel.collapsed?(0,d.jsx)(eJ.L2V,{}):(0,d.jsx)(eJ.qhg,{}),label:n.panel.collapsed?"Expand":"Collapse",onClick:()=>{n.panel.collapsed=!n.panel.collapsed,(0,T.Vx)(I.HS,"UI")}}}}),a?null:(0,d.jsx)(ta,{})]})},tc=e=>{var{children:t}=e,n=(0,e$._)(e,["children"]);return(0,d.jsx)("span",(0,ed._)((0,p._)({className:"EllipsisText"},n),{children:t}))},td=n(20316);let tu=e=>"string"==typeof e?(0,d.jsx)(td.xu,{iconName:e,className:"StatusBarItem__icon"}):u.createElement(e,{className:"StatusBarItem__icon"}),tm=e=>{let{icon:t,iconOnly:n,imageSrc:i,title:s,children:l}=e;return(0,d.jsxs)(d.Fragment,{children:[t&&tu(t),i&&(0,d.jsx)("img",{src:i,className:"StatusBarItem__icon--image",alt:s}),!n&&(0,d.jsx)("span",{className:"StatusBarItem__label",children:l})]})};var th=e=>{var{title:t,className:n,icon:i,iconOnly:s,imageSrc:l,hideTextOnMobile:a,href:r,button:o,children:c,hidden:u}=e,m=(0,e$._)(e,["title","className","icon","iconOnly","imageSrc","hideTextOnMobile","href","button","children","hidden"]);if(u)return null;let h=tm({icon:i,iconOnly:s,children:c,imageSrc:l,title:t}),g=a?"StatusBarItem StatusBarItem--hideOnMobile":"StatusBarItem";if(o)return(0,d.jsx)("button",(0,ed._)((0,p._)({className:(0,eG.Z)("".concat(g," StatusBarItem--action"),n),title:t},m),{children:h}));if(r)return(0,d.jsx)("a",(0,ed._)((0,p._)({href:r,target:"_blank",rel:"noreferrer",className:(0,eG.Z)("".concat(g," StatusBarItem--action"),n),title:t},m),{children:h}));let{style:x}=m;return(0,d.jsx)("div",{className:(0,eG.Z)("".concat(g," StatusBarItem--text"),n),title:t,style:x,children:h})},tp=n(17638),tg=n(23591),tx=n(91487);let tf=[{label:"Flow Mainnet",description:"Run scripts and transactions on Flow Mainnet.",type:E.vm.FlowMainnet,icon:(0,d.jsx)(eJ.VQE,{})},{label:"Flow Testnet",description:"Run scripts and transactions on Flow Testnet.",type:E.vm.FlowTestnet,icon:(0,d.jsx)(eJ.Cfj,{})},{label:"Flow Previewnet",description:"Run scripts and transactions on Flow Previewnet.",type:E.vm.FlowPreviewnet,icon:(0,d.jsx)(eJ.Cfj,{})},{label:"Local Emulator",description:"Run scripts and transactions on the local Flow Emulator.",type:E.vm.FlowEmulator,icon:(0,d.jsx)(tx.aNo,{})}],tv=(0,k.ZC)({button:{maxWidth:"initial"}});var ty=e=>{let{isOpen:t,onClose:n,value:i}=e,s=(0,g.F)(),l=(0,C.QD)(s),a=(0,C.EM)(s);return(0,d.jsxs)(x.u,{isOpen:t,onDismiss:()=>null==n?void 0:n(),topOffsetFixed:!0,containerClassName:l.container,children:[(0,d.jsxs)("div",{className:l.header,children:[(0,d.jsx)("span",{children:"Select Environment"}),(0,d.jsx)(f.h,{iconProps:{iconName:"Cancel"},styles:a,ariaLabel:"Close popup modal",onClick:()=>null==n?void 0:n()})]}),(0,d.jsx)("div",{className:l.body,children:(0,d.jsx)(tg.K,{tokens:{childrenGap:10},children:tf.map(e=>{let{label:t,description:s,type:l,icon:a}=e;return(0,d.jsx)(tp.W,{secondaryText:s,checked:l===i,className:tv.button,onClick:()=>null==n?void 0:n(l),onRenderIcon:()=>(0,d.jsx)("div",{className:"EnvironmentSelectButton__icon",children:a}),children:t},l)})})})]})};let tb=(e,t)=>1===e?"".concat(e," ").concat(t):"".concat(e," ").concat(t,"s"),tS=e=>{let t=0,n=0;if(!(null==e?void 0:e.length))return{errors:t,warnings:n};for(let i of e)switch(i.severity){case eg.ZL.Warning:case eg.ZL.Info:n++;break;case eg.ZL.Error:t++}return{errors:t,warnings:n}},tw=e=>{let{loading:t,lastError:n}=e;return t?(0,d.jsx)(th,{icon:"Build",children:(0,d.jsx)(tc,{children:"Loading"})}):n?(0,d.jsx)(th,{icon:"NotExecuted",hideTextOnMobile:!0,disabled:!0,children:"Execution failed"}):null};var tj=()=>{let[e,t]=(0,u.useState)(!1),n=(0,T.D$)(I.HS,"settings"),i=(0,T.D$)(I.HS,"status"),{warnings:s,errors:l}=tS(i.markers),a=i.loading?"StatusBar StatusBar--busy":"StatusBar",[r,o]=(0,u.useState)(null),[c,m]=(0,u.useState)("unknown");return(0,u.useEffect)(()=>{n.runtime&&E.vm.toString(n.runtime)!==c&&et.vc(E.ZP.networkConfig[n.runtime])},[n]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:a,children:[(0,d.jsxs)("div",{className:"StatusBar__side-left",children:[(0,d.jsx)(th,{icon:"ErrorBadge",button:!0,children:tb(l,"Error")}),s>0?(0,d.jsx)(th,{icon:"Warning",button:!0,children:tb(s,"Warning")}):null,tw({loading:i.loading,lastError:i.lastError})]}),(0,d.jsxs)("div",{className:"StatusBar__side-right",children:[(0,d.jsxs)(th,{icon:"Code",title:"Select environment",disabled:i.loading,onClick:()=>t(!0),hideTextOnMobile:!0,button:!0,children:["Environment: ",E.vm.toString(n.runtime)]}),(0,d.jsx)(th,{icon:"Feedback",title:"Send feedback",href:E.ZP.issueUrl,iconOnly:!0}),(0,d.jsx)(th,{imageSrc:"/github-mark-light-32px.png",title:"GitHub",href:E.ZP.githubUrl,iconOnly:!0})]})]}),(0,d.jsx)(ty,{value:n.runtime,isOpen:e,onClose:e=>{t(!1),e&&(I.HS.settings.runtime=e,(0,T.Vx)(I.HS,"settings"))}})]})},tC=n(18177);let tk=()=>{var e;let{snippetID:t,transactionID:n}=(0,m.useRouter)().query,i="string"==typeof t?t:void 0,s="string"==typeof n?n:void 0,l=new URLSearchParams(window.location.search),a=(0,T.D$)(I.HS,"settings"),r=(0,T.D$)(I.HS,"UI"),o=(0,T.D$)(I.HS,"editor"),c=(0,T.D$)(I.HS,"status");(0,u.useEffect)(()=>{s&&el(s)},[s]);let h=null!==(e=l.get("embed"))&&void 0!==e?e:"";(0,u.useEffect)(()=>{r.panel.layout=C.ms.Vertical,r.panel.height=250,r.panel.width=250,""!==l.get("filename")&&(o.fileName=l.get("filename")),""!==l.get("code")&&(o.code=l.get("code")),"dark"===l.get("colormode")&&(a.darkMode=!0),"light"===l.get("colormode")&&(a.darkMode=!1),"mainnet"===l.get("network")&&(a.runtime=E.vm.FlowMainnet),"testnet"===l.get("network")&&(a.runtime=E.vm.FlowTestnet),"previewnet"===l.get("network")&&(a.runtime=E.vm.FlowPreviewnet),"emulator"===l.get("network")&&(a.runtime=E.vm.FlowEmulator),"vertical"===l.get("output")&&(r.panel.layout=C.ms.Vertical,""!==l.get("outputSize")&&null!==l.get("outputSize")&&(r.panel.height=parseInt(l.get("outputSize")))),"horizontal"===l.get("output")&&(r.panel.layout=C.ms.Horizontal,""!==l.get("outputSize")&&null!==l.get("outputSize")&&(r.panel.width=parseInt(l.get("outputSize")))),"none"===l.get("output")&&(r.panel.width=0,r.panel.height=0),"embed"===h&&(r.panel.width=0,r.panel.height=0),(0,T.Vx)(I.HS,"settings"),(0,T.Vx)(I.HS,"editor"),(0,T.Vx)(I.HS,"UI"),console.log(r.panel),i&&(c.loading=!0,(0,T.Vx)(I.HS,"status"),Q.getSnippet(i).then(e=>{o.code=e.code,a.runtime=e.env,c.loading=!1,(0,T.Vx)(I.HS,"editor"),(0,T.Vx)(I.HS,"settings"),(0,T.Vx)(I.HS,"status")}).catch(e=>{c.lastError=e.message,c.loading=!1,(0,T.Vx)(I.HS,"status")}))},[i]);let p=(0,I.jS)(a.darkMode,a.useSystemTheme);a.darkMode=p===G.JV.dark;let[g,x]=(0,u.useState)((0,G.Bp)(p));return(0,u.useEffect)(()=>{let e=(0,I.jS)(a.darkMode,a.useSystemTheme);x((0,G.Bp)(e)),a.darkMode=e===G.JV.dark,(0,T.Vx)(I.HS,"settings")},[a.darkMode,a.useSystemTheme]),(0,d.jsx)(tC.f,{className:"App",theme:g,children:(0,d.jsxs)("div",{className:"Playground",children:[(0,d.jsx)(eh,{}),(0,d.jsx)(ec,{embed:h}),(0,d.jsxs)("div",{className:"Layout Layout--".concat(r.panel.layout),children:[(0,d.jsx)(tt,{children:(0,d.jsx)(eZ,{newCadence:a.runtime===E.vm.FlowPreviewnet||a.runtime===E.vm.FlowTestnet||a.runtime===E.vm.FlowEmulator,children:(0,d.jsx)(te,{})})}),(0,d.jsx)(to,{})]}),(0,d.jsx)(tj,{})]})})};var t_=tk},35883:function(){}}]);